import{c as k,r as d,j as e,d as $,L as D,s as v}from"./index-eed2kjuC.js";import{X as T,C as M}from"./x-u-VGKVG3.js";import{I as F}from"./image-C0c1fugV.js";import{S as O}from"./save-Dpe-CXr9.js";import{T as E}from"./tag-DAj8RzQy.js";import{P as B,S as R,a as z}from"./search-DriGhTlZ.js";import{U as P,T as U}from"./users-BAoO8Uzj.js";const J=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],V=k("code",J);const W=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],H=k("eye-off",W);const Q=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],A=k("eye",Q);const Y=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],K=k("layers",Y);const X=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],L=k("send",X);const G=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Z=k("share-2",G);function ee({isOpen:x,onClose:u,campaign:l,onSuccess:w}){const[o,f]=d.useState(!1),[m,g]=d.useState(null),[t,a]=d.useState({name:"",description:"",image_url:"",discount_type:"amount",discount_amount:0,discount_percent:0,reward_item:"",is_stackable:!1,is_public:!0,start_date:"",end_date:"",valid_time_start:"",valid_time_end:"",eligible_fields:[],payment_methods:[],min_spend:0,eligible_days:[],limit_per_user:1,total_quantity:100,redemption_limit:0,secret_codes:[],status:"active"}),[y,p]=d.useState("");if(d.useEffect(()=>{x&&(a(l?{name:l.name,description:l.description||"",image_url:l.image_url||"",discount_type:l.reward_item?"item":l.discount_percent>0?"percent":"amount",discount_amount:l.discount_amount||0,discount_percent:l.discount_percent||0,reward_item:l.reward_item||"",is_stackable:l.is_stackable||!1,is_public:l.is_public??!0,start_date:l.start_date?l.start_date.split("T")[0]:"",end_date:l.end_date?l.end_date.split("T")[0]:"",valid_time_start:l.valid_time_start||"",valid_time_end:l.valid_time_end||"",eligible_fields:l.eligible_fields||[],payment_methods:l.payment_methods||[],min_spend:l.min_spend||0,eligible_days:l.eligible_days||[],limit_per_user:l.limit_per_user||1,total_quantity:l.total_quantity||100,redemption_limit:l.redemption_limit||0,secret_codes:l.secret_codes||[],status:l.status||"active"}:{name:"",description:"",image_url:"",discount_type:"amount",discount_amount:0,discount_percent:0,reward_item:"",is_stackable:!1,is_public:!0,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+30*864e5).toISOString().split("T")[0],valid_time_start:"",valid_time_end:"",eligible_fields:[],payment_methods:[],min_spend:0,eligible_days:[],limit_per_user:1,total_quantity:100,redemption_limit:0,secret_codes:[],status:"active"}),g(null))},[x,l]),!x)return null;const b=(s,i)=>{a(n=>{const h=n[i];return h.includes(s)?{...n,[i]:h.filter(N=>N!==s)}:{...n,[i]:[...h,s]}})},j=()=>{y.trim()&&(a(s=>({...s,secret_codes:[...s.secret_codes,y.trim()]})),p(""))},_=s=>{a(i=>({...i,secret_codes:i.secret_codes.filter(n=>n!==s)}))},C=async s=>{s.preventDefault(),f(!0),g(null);try{if(!t.name)throw new Error("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç");if(t.discount_type==="amount"&&t.discount_amount<=0)throw new Error("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");if(t.discount_type==="percent"&&(t.discount_percent<=0||t.discount_percent>100))throw new Error("‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");if(t.discount_type==="item"&&!t.reward_item)throw new Error("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•");const i={name:t.name,description:t.description,image_url:t.image_url,discount_amount:t.discount_type==="amount"?Number(t.discount_amount):0,discount_percent:t.discount_type==="percent"?Number(t.discount_percent):0,reward_item:t.discount_type==="item"?t.reward_item:null,is_stackable:t.is_stackable,coupon_type:t.is_stackable?"ontop":"main",is_public:t.is_public,min_spend:Number(t.min_spend),start_date:new Date(t.start_date).toISOString(),end_date:new Date(t.end_date).toISOString(),valid_time_start:t.valid_time_start||null,valid_time_end:t.valid_time_end||null,eligible_fields:t.eligible_fields.length>0?t.eligible_fields:null,payment_methods:t.payment_methods.length>0?t.payment_methods:null,eligible_days:t.eligible_days.length>0?t.eligible_days:null,limit_per_user:Number(t.limit_per_user),total_quantity:Number(t.total_quantity),redemption_limit:t.redemption_limit>0?Number(t.redemption_limit):null,secret_codes:t.secret_codes.length>0?t.secret_codes:null,status:t.status};if(l){const{error:n}=await v.from("campaigns").update(i).eq("id",l.id);if(n)throw n}else{const{error:n}=await v.from("campaigns").insert([i]);if(n)throw n}w(),u()}catch(i){console.error(i),g(i.message||"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à")}finally{f(!1)}},S=[{id:"Mon",label:"‡∏à."},{id:"Tue",label:"‡∏≠."},{id:"Wed",label:"‡∏û."},{id:"Thu",label:"‡∏û‡∏§."},{id:"Fri",label:"‡∏®."},{id:"Sat",label:"‡∏™."},{id:"Sun",label:"‡∏≠‡∏≤."}];return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:u}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"‚Äã"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[e.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900",id:"modal-title",children:l?"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç (V2)":"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç‡πÉ‡∏´‡∏°‡πà (V2)"}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-500",children:e.jsx(T,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:C,className:"px-6 py-6 max-h-[80vh] overflow-y-auto bg-gray-50/30",children:[m&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-lg text-sm border border-red-200 shadow-sm",children:m}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("h4",{className:"flex items-center text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 border-b pb-2",children:[e.jsx("span",{className:"bg-indigo-100 text-indigo-700 w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs",children:"A"}),"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç"}),e.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border p-2.5",value:t.name,onChange:s=>a({...t,name:s.target.value}),placeholder:"‡πÄ‡∏ä‡πà‡∏ô Flash Sale 2.2"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢/‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"}),e.jsx("textarea",{rows:2,className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border p-2.5",value:t.description,onChange:s=>a({...t,description:s.target.value}),placeholder:"‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô..."})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏ö‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå"}),e.jsxs("div",{className:"mt-1 flex rounded-lg shadow-sm",children:[e.jsx("span",{className:"inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",className:"flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-r-lg focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border-gray-300 border",value:t.image_url,onChange:s=>a({...t,image_url:s.target.value}),placeholder:"https://example.com/banner.jpg"})]})]})]})]}),e.jsxs("section",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("h4",{className:"flex items-center text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 border-b pb-2",children:[e.jsx("span",{className:"bg-indigo-100 text-indigo-700 w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs",children:"B"}),"‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>a({...t,is_stackable:!1}),className:`flex-1 py-2 px-3 text-sm font-medium rounded-lg border text-center ${t.is_stackable?"bg-white border-gray-300 text-gray-600":"bg-red-50 border-red-200 text-red-700"}`,children:"üî¥ ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏Å"}),e.jsx("button",{type:"button",onClick:()=>a({...t,is_stackable:!0}),className:`flex-1 py-2 px-3 text-sm font-medium rounded-lg border text-center ${t.is_stackable?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-300 text-gray-600"}`,children:"üîµ ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>a({...t,is_public:!0}),className:`flex-1 py-2 px-3 text-sm font-medium rounded-lg border text-center items-center justify-center flex gap-1 ${t.is_public?"bg-green-50 border-green-200 text-green-700":"bg-white border-gray-300 text-gray-600"}`,children:[e.jsx(A,{className:"w-4 h-4"})," ‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞"]}),e.jsxs("button",{type:"button",onClick:()=>a({...t,is_public:!1}),className:`flex-1 py-2 px-3 text-sm font-medium rounded-lg border text-center items-center justify-center flex gap-1 ${t.is_public?"bg-white border-gray-300 text-gray-600":"bg-gray-100 border-gray-300 text-gray-800"}`,children:[e.jsx(H,{className:"w-4 h-4"})," ‡πÅ‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö"]})]})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg border border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î"}),e.jsxs("select",{className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border p-2",value:t.discount_type,onChange:s=>a({...t,discount_type:s.target.value}),children:[e.jsx("option",{value:"amount",children:"üí∞ ‡∏•‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ø)"}),e.jsx("option",{value:"percent",children:"‡∏•‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå (%)"}),e.jsx("option",{value:"item",children:"üéÅ ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ü‡∏£‡∏µ"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[t.discount_type==="amount"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏î (‡∏ö‡∏≤‡∏ó)"}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"‡∏ø"})}),e.jsx("input",{type:"number",min:"0",className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-7 sm:text-sm border-gray-300 rounded-md border p-2",value:t.discount_amount,onChange:s=>a({...t,discount_amount:parseFloat(s.target.value),discount_percent:0})})]})]}),t.discount_type==="percent"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏•‡∏î (%)"}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("input",{type:"number",min:"0",max:"100",className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pr-12 sm:text-sm border-gray-300 rounded-md border p-2",value:t.discount_percent,onChange:s=>a({...t,discount_percent:parseFloat(s.target.value),discount_amount:0})}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"%"})})]})]}),t.discount_type==="item"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö"}),e.jsx("input",{type:"text",className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md border p-2",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°‡∏ï‡∏£‡∏≤‡∏ô‡πâ‡∏≥‡∏ó‡∏¥‡∏û‡∏¢‡πå 1 ‡πÅ‡∏û‡πá‡∏Ñ",value:t.reward_item,onChange:s=>a({...t,reward_item:s.target.value})})]})]})]})]})]}),e.jsxs("section",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("h4",{className:"flex items-center text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 border-b pb-2",children:[e.jsx("span",{className:"bg-indigo-100 text-indigo-700 w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs",children:"C"}),"‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"‡∏¢‡∏≠‡∏î‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ (‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÑ‡∏î‡πâ)"}),e.jsxs("div",{className:"relative rounded-md shadow-sm max-w-xs",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"‡∏ø"})}),e.jsx("input",{type:"number",min:"0",className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-7 sm:text-sm border-gray-300 rounded-md border p-2",value:t.min_spend,onChange:s=>a({...t,min_spend:parseFloat(s.target.value)}),placeholder:"0"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"‡∏¢‡∏≠‡∏î‡∏à‡∏≠‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏∂‡∏á‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÑ‡∏î‡πâ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.map(s=>e.jsx("button",{type:"button",onClick:()=>b(s.id,"eligible_days"),className:`w-10 h-10 rounded-full text-xs font-bold transition-colors ${t.eligible_days.includes(s.id)?"bg-indigo-600 text-white shadow-md":"bg-white border border-gray-200 text-gray-400 hover:border-indigo-300"}`,children:s.label},s.id)),t.eligible_days.length===0&&e.jsx("span",{className:"text-xs text-gray-400 self-center ml-2",children:"(‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"‡∏™‡∏ô‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡πà‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[1,2,3,4,5,6].map(s=>e.jsxs("button",{type:"button",onClick:()=>b(s,"eligible_fields"),className:`px-3 py-1 rounded-md text-xs font-medium border ${t.eligible_fields.includes(s)?"bg-indigo-100 text-indigo-800 border-indigo-200":"bg-white text-gray-600 border-gray-300"}`,children:["‡∏™‡∏ô‡∏≤‡∏° ",s]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["CASH","QR"].map(s=>e.jsx("button",{type:"button",onClick:()=>b(s,"payment_methods"),className:`px-3 py-1 rounded-md text-xs font-medium border ${t.payment_methods.includes(s)?"bg-green-100 text-green-800 border-green-200":"bg-white text-gray-600 border-gray-300"}`,children:s==="CASH"?"‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î (‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏ô‡∏≤‡∏°)":"QR PromtPay"},s))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valid From (Time)"}),e.jsx("input",{type:"time",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border p-2",value:t.valid_time_start,onChange:s=>a({...t,valid_time_start:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valid Until (Time)"}),e.jsx("input",{type:"time",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border p-2",value:t.valid_time_end,onChange:s=>a({...t,valid_time_end:s.target.value})})]})]})]})]}),e.jsxs("section",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("h4",{className:"flex items-center text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 border-b pb-2",children:[e.jsx("span",{className:"bg-indigo-100 text-indigo-700 w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs",children:"D"}),"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå)"}),e.jsx("input",{type:"number",min:"1",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border p-2.5",value:t.total_quantity,onChange:s=>a({...t,total_quantity:parseInt(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡πà‡∏≠‡∏Ñ‡∏ô"}),e.jsx("input",{type:"number",min:"1",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border p-2.5",value:t.limit_per_user,onChange:s=>a({...t,limit_per_user:parseInt(s.target.value)})})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ (Redemption Limit)"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"number",min:"0",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border p-2.5",placeholder:"0 = ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î",value:t.redemption_limit,onChange:s=>a({...t,redemption_limit:parseInt(s.target.value)||0})})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á (‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏à‡∏Å 100 ‡πÉ‡∏ö ‡πÅ‡∏ï‡πà‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà 5 ‡∏Ñ‡∏ô)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç"}),e.jsx("input",{type:"date",required:!0,className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border p-2.5",value:t.start_date,onChange:s=>a({...t,start_date:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç"}),e.jsx("input",{type:"date",required:!0,className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border p-2.5",value:t.end_date,onChange:s=>a({...t,end_date:s.target.value})})]})]}),!t.is_public&&e.jsxs("div",{className:"mt-6 border-t border-gray-100 pt-4 bg-yellow-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"text-xs font-semibold text-yellow-800 uppercase tracking-wider mb-2 flex items-center",children:[e.jsx($,{className:"w-3 h-3 mr-1"})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö (‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç‡πÅ‡∏ö‡∏ö‡∏•‡∏±‡∏ö)"]}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",className:"flex-1 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block sm:text-sm border-yellow-300 rounded-md border p-2",placeholder:"e.g. EARLYBIRD2024",value:y,onChange:s=>p(s.target.value),onKeyDown:s=>s.key==="Enter"&&(s.preventDefault(),j())}),e.jsx("button",{type:"button",onClick:j,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none",children:"Add"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.secret_codes.map((s,i)=>e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",children:[s,e.jsxs("button",{type:"button",className:"flex-shrink-0 ml-1.5 h-4 w-4 rounded-full text-yellow-500 hover:bg-yellow-200 focus:outline-none",onClick:()=>_(s),children:[e.jsx("span",{className:"sr-only",children:"Remove"}),e.jsx(T,{className:"h-3 w-3"})]})]},i)),t.secret_codes.length===0&&e.jsx("span",{className:"text-xs text-red-500",children:"* ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏´‡∏±‡∏™"})]})]})]})]}),e.jsxs("div",{className:"mt-6 border-t border-gray-100 pt-5 flex justify-between items-center bg-white p-4 sticky bottom-0 border shadow-lg rounded-xl",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"status",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:t.status==="active",onChange:s=>a({...t,status:s.target.checked?"active":"inactive"})}),e.jsx("label",{htmlFor:"status",className:"ml-2 block text-sm font-medium text-gray-900",children:"Active Campaign"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:u,className:"bg-white py-2 px-6 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{type:"submit",disabled:o||!t.is_public&&t.secret_codes.length===0,className:"inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:[o?e.jsx(D,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}):e.jsx(O,{className:"-ml-1 mr-2 h-4 w-4"}),"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç"]})]})]})]})]})]})})}function te({isOpen:x,onClose:u,campaign:l,onSuccess:w}){const[o,f]=d.useState("all"),[m,g]=d.useState([]),[t,a]=d.useState([]),[y,p]=d.useState(!1),[b,j]=d.useState(!1);d.useEffect(()=>{x&&_()},[x]);const _=async()=>{p(!0);try{const{data:s,error:i}=await v.from("profiles").select("tags");if(i)throw i;const n=new Set;s?.forEach(h=>{h.tags&&Array.isArray(h.tags)&&h.tags.forEach(N=>n.add(N))}),n.add("vip"),a(Array.from(n).sort())}catch(s){console.error("Error fetching tags:",s)}finally{p(!1)}},C=s=>{m.includes(s)?g(i=>i.filter(n=>n!==s)):g(i=>[...i,s])},S=async()=>{if(l){if(o==="tags"&&m.length===0){alert("Please select at least one tag");return}if(confirm(`Confirm broadcast "${l.name}" to ${o==="all"?"ALL Users":m.join(", ")}?`)){j(!0);try{const{error:s}=await v.functions.invoke("broadcast-campaign",{body:{campaignId:l.id,targetTags:o==="all"?["All"]:m}});if(s)throw s;alert("Broadcast sent successfully!"),w(),u()}catch(s){alert("Broadcast failed: "+s.message)}finally{j(!1)}}}};return x?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-lg shadow-xl flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-indigo-600"})," Broadcast Campaign"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l?.name})]}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600",children:e.jsx(T,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Audience"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer flex items-center gap-3 ${o==="all"?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-indigo-300"}`,onClick:()=>f("all"),children:[e.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="all"?"border-indigo-600":"border-gray-400"}`,children:o==="all"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm text-gray-900",children:"All Customers"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Send to everyone who follows the LINE OA"})]})]}),e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer flex items-center gap-3 ${o==="tags"?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-indigo-300"}`,onClick:()=>f("tags"),children:[e.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="tags"?"border-indigo-600":"border-gray-400"}`,children:o==="tags"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900",children:"Specific Tags"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Send only to users with ANY of the selected tags"})]})]})]})]}),o==="tags"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tags"}),y?e.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"Loading tags..."}):t.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No tags found in system."}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:t.map(s=>e.jsxs("button",{onClick:()=>C(s),className:`px-3 py-2 rounded text-sm font-medium border flex items-center justify-between transition-colors ${m.includes(s)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"truncate",children:s}),m.includes(s)&&e.jsx(E,{className:"w-3 h-3 ml-1 fill-current"})]},s))}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"* Users with at least one matching tag will receive the message."})]})]}),e.jsxs("div",{className:"p-4 border-t bg-gray-50 rounded-b-lg flex justify-end gap-3",children:[e.jsx("button",{onClick:u,disabled:b,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none",children:"Cancel"}),e.jsx("button",{onClick:S,disabled:b||o==="tags"&&m.length===0,className:`px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none flex items-center gap-2 ${b?"opacity-70 cursor-not-allowed":""}`,children:b?"Sending...":e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4"}),"Send Broadcast"]})})]})]})}):null}function ce(){const[x,u]=d.useState([]),[l,w]=d.useState(!0),[o,f]=d.useState(""),[m,g]=d.useState(!1),[t,a]=d.useState(null),[y,p]=d.useState(!1),[b,j]=d.useState(null);d.useEffect(()=>{_()},[]);const _=async()=>{w(!0);try{const{data:r,error:c}=await v.from("campaigns").select("*").order("created_at",{ascending:!1});if(c)throw c;u(r||[])}catch(r){console.error("Error fetching campaigns:",r)}finally{w(!1)}},C=()=>{a(null),g(!0)},S=r=>{a(r),g(!0)},s=async r=>{if(confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç‡∏ô‡∏µ‡πâ? ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ"))try{const{error:c}=await v.from("campaigns").delete().eq("id",r);if(c)throw c;_()}catch(c){console.error("Error deleting campaign:",c),alert(`‡∏•‡∏ö‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${c.message||"‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"}`)}},i=r=>{const c=`${window.location.origin}/#/wallet`,I={type:"bubble",hero:{type:"image",url:r.image_url||"https://images.unsplash.com/photo-1541534741688-6078c6bfb5c5?q=80&w=1000&auto=format&fit=crop",size:"full",aspectRatio:"20:13",aspectMode:"cover",action:{type:"uri",uri:c}},body:{type:"box",layout:"vertical",contents:[{type:"text",text:"SPECIAL REWARD",weight:"bold",color:"#D4AF37",size:"xs"},{type:"text",text:r.name,weight:"bold",size:"xl",margin:"md",wrap:!0},{type:"text",text:r.description||"Limited time offer!",size:"sm",color:"#999999",margin:"sm",wrap:!0}]},footer:{type:"box",layout:"vertical",spacing:"sm",contents:[{type:"button",style:"primary",height:"sm",action:{type:"uri",label:"Collect Coupon",uri:c},color:"#1F2937"}]}},q=JSON.stringify(I,null,2);navigator.clipboard.writeText(q),alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Flex JSON ‡πÅ‡∏•‡πâ‡∏ß! ‡∏ô‡∏≥‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô LINE OA Manager ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢")},n=r=>{let c=`${window.location.origin}/#/wallet?id=${r.id}&action=collect`;!r.is_public&&r.secret_codes&&r.secret_codes.length>0?c+=`&code=${r.secret_codes[0]}`:r.is_public&&(c+="&code="),navigator.clipboard.writeText(c),alert(`‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏î‡πà‡∏ß‡∏ô‡πÅ‡∏•‡πâ‡∏ß!
${c}

(‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ userId=... ‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÉ‡∏ô LINE)`)},h=r=>{j(r),p(!0)},N=x.filter(r=>r.name.toLowerCase().includes(o.toLowerCase())||(r.description||"").toLowerCase().includes(o.toLowerCase()));return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç (V2)"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î, ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ï‡πà‡∏≤‡∏á‡πÜ"})]}),e.jsxs("button",{onClick:C,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none",children:[e.jsx(B,{className:"-ml-1 mr-2 h-5 w-5"}),"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç‡πÉ‡∏´‡∏°‡πà"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6 p-4",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition duration-150 ease-in-out",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç...",value:o,onChange:r=>f(r.target.value)})]})}),l?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[N.map(r=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"relative h-32 bg-gray-100",children:[r.image_url?e.jsx("img",{src:r.image_url,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-indigo-50 to-purple-50",children:e.jsx(E,{className:"h-10 w-10 text-indigo-200"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.status==="active"?"‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô":"‡∏£‡∏∞‡∏á‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô"})})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900 line-clamp-1",title:r.name,children:r.name})}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2 min-h-[40px]",children:r.description||"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{type:r.discount_amount>0?"amount":"percent"}),e.jsx("span",{className:"ml-2 font-medium text-indigo-700",children:r.discount_amount>0?`‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î ${r.discount_amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó`:`‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î ${r.discount_percent}%`})]}),e.jsx("div",{className:"flex items-center",children:r.is_public?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-3.5 h-3.5 mr-2 text-green-500"}),e.jsx("span",{className:"text-green-600 text-xs font-semibold",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞"})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-3.5 h-3.5 mr-2 text-yellow-500"}),e.jsxs("span",{className:"text-yellow-700 text-xs font-semibold",children:["‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö: ",r.secret_codes?.[0]||"???"]})]})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsxs("span",{children:[new Date(r.start_date).toLocaleDateString()," - ",new Date(r.end_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsxs("span",{children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ",r.total_quantity," | ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡πà‡∏≠‡∏Ñ‡∏ô: ",r.limit_per_user]})]}),e.jsxs("div",{className:"flex items-center text-red-600 font-medium mt-1",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:["‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß: ",r.redemption_count||0," / ",r.redemption_limit?r.redemption_limit:"‚àû"]})]})]}),e.jsxs("div",{className:"mt-5 pt-4 border-t border-gray-100 flex justify-between items-center bg-gray-50/50 -mx-5 px-5 py-3",children:[e.jsxs("button",{onClick:()=>i(r),className:"text-xs font-medium text-gray-600 hover:text-gray-900 flex items-center bg-white border border-gray-200 rounded-lg px-3 py-1.5 shadow-sm hover:shadow-md transition-all mr-2",title:"‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Flex Message JSON",children:[e.jsx(V,{className:"w-3 h-3 mr-1.5"}),"JSON"]}),e.jsxs("button",{onClick:()=>n(r),className:"text-xs font-medium text-indigo-600 hover:text-indigo-800 flex items-center bg-white border border-indigo-200 rounded-lg px-3 py-1.5 shadow-sm hover:shadow-md transition-all",children:[e.jsx(Z,{className:"w-3 h-3 mr-1.5"}),"Share Link"]}),e.jsxs("button",{onClick:()=>h(r),className:"text-xs font-medium text-white flex items-center bg-green-600 border border-transparent rounded-lg px-3 py-1.5 shadow-sm hover:bg-green-700 transition-all ml-2",children:[e.jsx(L,{className:"w-3 h-3 mr-1.5"}),"Broadcast"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S(r),className:"text-gray-400 hover:text-indigo-600 p-1.5 rounded-md hover:bg-white",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>s(r.id),className:"text-gray-400 hover:text-red-600 p-1.5 rounded-md hover:bg-white",title:"‡∏•‡∏ö",children:e.jsx(U,{className:"w-4 h-4"})})]})]})]})]},r.id)),N.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç‡πÅ‡∏£‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!"})]}),e.jsx(ee,{isOpen:m,onClose:()=>g(!1),campaign:t,onSuccess:_}),e.jsx(te,{isOpen:y,onClose:()=>p(!1),campaign:b,onSuccess:()=>{}})]})}function se({type:x}){return x==="amount"?e.jsx("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center text-green-600 text-xs font-bold",children:"‡∏ø"}):e.jsx("div",{className:"w-5 h-5 rounded-full bg-pink-100 flex items-center justify-center text-pink-600 text-xs font-bold",children:"%"})}export{ce as default};
